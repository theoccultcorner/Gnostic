import{j as r,a as e,S as a,R as h,_ as u,r as i,d as E,F as m,E as w}from"./index-3dc75cc8.js";const P=()=>r("div",{className:"skeleton",children:[r("div",{className:"post-skeleton-header",children:[e(a,{variant:"circular",width:40,height:40,className:"shimmer_bg"}),r("span",{children:[e(a,{variant:"text",sx:{fontSize:"1rem"},className:"skeleton-user-name shimmer_bg"}),e(a,{variant:"text",sx:{fontSize:"0.7rem"},className:"skeleton-user-name shimmer_bg"})]})]}),e(a,{variant:"rectangular",height:240,className:"shimmer_bg"}),e(a,{variant:"text",sx:{fontSize:"1rem"},className:"skeleton-user-caption shimmer_bg"}),e("div",{className:"post-skeleton-nav",children:Array.from({length:4},(l,o)=>e(a,{variant:"rectangular",width:50,height:35,className:"shimmer_bg"},o))}),e(a,{variant:"rectangular",height:30,className:"shimmer_bg"})]}),A=h.lazy(()=>u(()=>import("./index-3dc75cc8.js").then(l=>l.bf),["assets/index-3dc75cc8.js","assets/index-e4581e84.css"])),S=h.lazy(()=>u(()=>import("./index-72078e02.js"),["assets/index-72078e02.js","assets/index-3dc75cc8.js","assets/index-e4581e84.css"])),L=h.lazy(()=>u(()=>import("./index-2b89fdd8.js"),["assets/index-2b89fdd8.js","assets/index-3dc75cc8.js","assets/index-e4581e84.css"])),N=10,z=5,I=({rowMode:l,user:o})=>{const[d,p]=i.useState([]),[g,b]=i.useState(!0),[_,f]=i.useState(!1),[v,y]=i.useState("700"),x=o==null?void 0:o.isAnonymous;return i.useEffect(()=>{function t(){const{innerWidth:n}=window;return n}function s(){y(t())}return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),i.useEffect(()=>{const t=n=>{window.innerHeight+n.target.documentElement.scrollTop+1>=n.target.documentElement.scrollHeight&&f(!0)};window.addEventListener("scroll",t);const s=E.collection("posts").orderBy("timestamp","desc").limit(N).onSnapshot(n=>{b(!1),p(n.docs.map(c=>({id:c.id,post:c.data()})))});return()=>{window.removeEventListener("scroll",t),s()}},[]),i.useEffect(()=>{let t;return _&&d.length&&(t=E.collection("posts").orderBy("timestamp","desc").startAfter(d[d.length-1].post.timestamp).limit(N).onSnapshot(s=>{p(n=>[...n,...s.docs.map(c=>({id:c.id,post:c.data()}))])}),f(!1)),()=>{t&&t()}},[_]),r(m,{children:[r("div",{className:"home-posts-container",style:g?{width:"100%",minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"}:{},children:[x&&!location.href.includes("login")&&!location.href.includes("signup")&&e(w,{inApp:!0,children:e(L,{})}),e("div",{className:`app_posts ${l?"":"app_posts_column flex"}`,children:g?e(m,{children:Array.from({length:z},(t,s)=>e(P,{},s))}):e(m,{children:e(w,{inApp:!0,children:d.map(({id:t,post:s},n)=>r(i.Fragment,{children:[e(A,{rowMode:l,postId:t,user:o,post:s},t),n===1&&v<1300&&e(S,{currentUserUid:o.uid})]},t))})})})]}),v>1300&&e(S,{})]})};export{I as default};
